# Changelog

## [Unreleased]

## [1.9.4] - 2026-01-20
### Added
- **Source Parsing**: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 02:15 KGD). –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `ENABLE_SOURCE_PARSING=1` –∏ `SOURCE_PARSING_TIME_LOCAL`.
- **Source Parsing**: –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è OCR (60 —Å–µ–∫) –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
- **Source Parsing**: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π (—á–µ—Ä–µ–∑ `SOURCE_PARSING_DIAG_TITLE`).
- **Source Parsing**: –õ–æ–≥–∏ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Persistent Volume `/data/parse_debug`.

### Fixed
- **Source Parsing**: –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –±–æ—Ç–µ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã "–º–æ–ª—á–∞–ª–∏–≤—ã–µ" –ø–∞–¥–µ–Ω–∏—è.
- **Source Parsing**: OCR –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ `tretyakov` (`SOURCE_PARSING_DISABLE_OCR_SOURCES`) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.
- **CrumpleVideo**: Test "Tomorrow" renders now use lower samples and resolution to speed up single-scene previews.
- **CrumpleVideo**: Test-mode intro previews now default to `STICKER_YELLOW` when no explicit pattern is provided.
- **Intro Visuals**: Restored the dark default palette and added a yellow theme via `_YELLOW` patterns.

## [1.9.3] - 2026-01-20
### Fixed
- **Source Parsing**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞—Ü–∏–π –¢—Ä–µ—Ç—å—è–∫–æ–≤–∫–∏ ‚Äî —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ü–µ–Ω–µ (`–ö–∏–Ω–æ–∑–∞–ª`/`–ê—Ç—Ä–∏—É–º`), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è. –†–∞–Ω–µ–µ —Å–æ–±—ã—Ç–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö –∑–∞–ª–∞—Ö –æ—à–∏–±–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∏—Å—å –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç—ã.
- **Source Parsing**: –î–æ–±–∞–≤–ª–µ–Ω label `üé® –¢—Ä–µ—Ç—å—è–∫–æ–≤–∫–∞` –≤ –æ—Ç—á—ë—Ç—ã `/parse`.
- **Kaggle Assets**: Preserve existing Kaggle kernel dataset sources while appending new ones, and restore `generate_intro_image` in the CrumpleVideo notebook.
- **CrumpleVideo**: Move `_resolve_image_path` to module scope so the main pipeline can call it safely.
- **CrumpleVideo**: Define `is_last` before building the intro segment to avoid `UnboundLocalError` in production.

## [1.9.2] - 2026-01-20
### Fixed
- **Kaggle Assets**: Fixed `ModuleNotFoundError` by moving assets and `pattern_preview.py` to a dedicated Kaggle Dataset (`video-announce-assets`) and mounting it in the kernel.
### Fixed
- CrumpleVideo Kaggle kernel now loads `pattern_preview` via the `video-announce-assets` dataset instead of local files.

## [1.9.1] - 2026-01-20
### Fixed
- **Kaggle Kernel ID**: Fixed a bug where `kaggle_client.py` was forcing the legacy `video-afisha` kernel ID, preventing `CrumpleVideo` updates.
- **Intro Visuals**: Integrated verified `pattern_preview` logic into the `CrumpleVideo` kernel to ensure correct fonts and alignment in production.
- **Outro Animation**: Disabled physics simulation (crumpling) for the Outro scene, ensuring it remains static/readable.

## [1.9.0] - 2026-01-20

### Added
- **Video Announce**: Automated "Tomorrow" pipeline (`/v` -> `üöÄ –ó–∞–ø—É—Å–∫ –ó–∞–≤—Ç—Ä–∞`).
- **Video Announce**: Test mode (`/v` -> `üß™ –¢–µ—Å—Ç –ó–∞–≤—Ç—Ä–∞`) for single-scene verification.
- **Video Announce**: Randomize event order selection (prioritizing OCR candidates).
- **Video Announce**: Visual improvements for City/Date intro layout.

## [1.8.2] - 2026-01-07

### Fixed
- **Channel Navigation Buttons**: Buttons ("Today", "Tomorrow" etc.) are now ONLY added if the post contains `#–∞–Ω–æ–Ω—Å`, `#–∞–Ω–æ–Ω—Å–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥` or `#–∞–Ω–æ–Ω—Å–∫–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥` hashtags. Fixes EVE-13 where buttons appeared in all channel posts.

## [1.8.1] - 2026-01-05

### Fixed
- **Channel Navigation Buttons**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∫–∞–Ω–∞–ª–∞ ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `channel_post` –≤ `allowed_updates` webhook.
- **Channel Navigation Buttons**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ `db` –∏ `bot` –≤ —Ö—ç–Ω–¥–ª–µ—Ä–µ ‚Äî —Ç–µ–ø–µ—Ä—å –±–µ—Ä—É—Ç—Å—è –∏–∑ –º–æ–¥—É–ª—è `main`.
- **Channel Navigation Buttons**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –∫–æ–º–∞–Ω–¥ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ `/` –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤–Ω—É—Ç—Ä—å —Ö—ç–Ω–¥–ª–µ—Ä–∞.

## [1.8.0] - 2026-01-05

### Added
- **Channel Navigation Buttons**: –î–æ–±–∞–≤–ª–µ–Ω—ã inline-–∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ:
  - ¬´üìÖ –°–µ–≥–æ–¥–Ω—è¬ª ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
  - ¬´üìÖ –ó–∞–≤—Ç—Ä–∞¬ª ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è (33% —à–∞–Ω—Å)
  - ¬´üìÖ –í—ã—Ö–æ–¥–Ω—ã–µ¬ª ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ (33% —à–∞–Ω—Å)
  - ¬´üìÖ [–ú–µ—Å—è—Ü]¬ª ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü (33% —à–∞–Ω—Å)
  - –ê–ª–≥–æ—Ä–∏—Ç–º `random.choice` –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
  - –ú–æ–¥–µ–ª—å `TomorrowPage` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü ¬´–∑–∞–≤—Ç—Ä–∞¬ª
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä—É–±—Ä–∏–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Å—Ç–æ–≤ (–Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏)
- **3D Preview on Split Pages**: –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –º–µ—Å—è—Ü–∞ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–±—ã—Ç–∏–π (>30) —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è 3D-–ø—Ä–µ–≤—å—é, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å (–æ–±—ã—á–Ω—ã–µ —Ñ–æ—Ç–æ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è).

### Changed
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –ø–æ–¥–≤–∞–ª–µ —Å–ø–µ—Ü-—Å—Ç—Ä–∞–Ω–∏—Ü (`/special`, Tomorrow, Weekend): —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü —Ç–µ–ø–µ—Ä—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π.

## [1.7.8] - 2026-01-04

### Added
- **üèõ Dom Iskusstv Parsing**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –î–æ–º–∞ –∏—Å–∫—É—Å—Å—Ç–≤ —Å Kaggle:
  - –ö–Ω–æ–ø–∫–∞ "üèõ –î–æ–º –∏—Å–∫—É—Å—Å—Ç–≤" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –¥–ª—è –≤–≤–æ–¥–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–ø–µ—Ü–ø—Ä–æ–µ–∫—Ç
  - –ö–Ω–æ–ø–∫–∞ "üèõ –ò–∑–≤–ª–µ—á—å –∏–∑ –î–æ–º –∏—Å–∫—É—Å—Å—Ç–≤" –≤ VK review –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
  - Kaggle notebook `ParseDomIskusstv` –¥–ª—è —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞ —Å–æ–±—ã—Ç–∏–π —Å —Å–∞–π—Ç–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü —Å –±–∏–ª–µ—Ç–∞–º–∏, —Ñ–æ—Ç–æ –∏ –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
  - BDD E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- **E2E Testing**: –î–æ–±–∞–≤–ª–µ–Ω —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è E2E BDD —Ç–µ—Å—Ç–æ–≤ (`tests/e2e/`):
  - `HumanUserClient` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ Telethon —Å –∏–º–∏—Ç–∞—Ü–∏–µ–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
  - BDD —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞ Gherkin —Å —Ä—É—Å—Å–∫–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º
  - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è üéü, –ë–∏–ª–µ—Ç—ã, —Ä—É–±.)

### Fixed
- **Telegraph PAGE_ACCESS_DENIED Fallback**: –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü—ã (PAGE_ACCESS_DENIED) —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–º–µ—Å—Ç–æ —Å–±–æ—è.
- **Telegraph Rebuild on Event Update**: –í—ã–∑–æ–≤ `update_event_ticket_status` —Ç–µ–ø–µ—Ä—å —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫—É Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ –±–∏–ª–µ—Ç–∞—Ö.
- **Dom Iskusstv Updated Events Links**: –°—Å—ã–ª–∫–∏ –Ω–∞ Telegraph –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–¥–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ `updated_event_ids`).
- **Events List Message Length**: Fallback –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ Telegram (4096 —Å–∏–º–≤–æ–ª–æ–≤).
- **–§–µ—Å—Ç–∏–≤–∞–ª–∏**: 3D –ø—Ä–µ–≤—å—é –Ω–∞–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è.

### Changed
- **–§–µ—Å—Ç–∏–≤–∞–ª–∏**: `/festivals_fix_nav` –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∞—Ä—Ö–∏–≤–Ω—ã–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª–∏ –±–µ–∑ –±—É–¥—É—â–∏—Ö —Å–æ–±—ã—Ç–∏–π.

## [1.7.7] - 2026-01-02

### Added
- **3D Preview**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üåê All missing" –≤ –º–µ–Ω—é `/3di` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–≤—å—é –≤—Å–µ—Ö –±—É–¥—É—â–∏—Ö —Å–æ–±—ã—Ç–∏–π –±–µ–∑ preview_3d_url –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º.
- **–§–µ—Å—Ç–∏–≤–∞–ª–∏**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è" –≤ –º–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–µ—Å—Ç–∏–≤–∞–ª—è (`/fest edit`) –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–∞ Telegraph-—Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è.

## [1.7.5] - 2026-01-02

### Changed
- Increased event limit for 3D previews on month pages from 10 to 30.

## [1.7.6] - 2026-01-02

### Fixed
- **3D Preview**:
  - **Notebook Cleanup**: Kaggle notebook now performs aggressive cleanup (`rm -rf`) of Blender binary and image directories before completion. This prevents the bot from downloading massive amount of data (hundreds of MBs) and ensures only the result JSON is retrieved, fixing "Result not applied" errors.

## [1.7.4] - 2026-01-02

### Added
- **Telegraph**: –î–ª—è —Å–æ–±—ã—Ç–∏–π —Å –¥–ª–∏–Ω–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º (>500 —Å–∏–º–≤–æ–ª–æ–≤) —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (`search_digest`) –Ω–∞–¥ –ø–æ–ª–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω–æ–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–µ–π. –£–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ–±—ã—Ç–∏–π.

### Fixed
- **Tretyakov Parser**: 
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—é ‚Äî —Ç–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –¥–∞—Ç—ã —á–µ—Ä–µ–∑ —Å—Ç—Ä–µ–ª–∫—É `.week-calendar-next`.
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –ø–∞—Ä—Å–µ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∫ –Ω—É–∂–Ω–æ–π –¥–∞—Ç–µ –ø–µ—Ä–µ–¥ –∫–ª–∏–∫–æ–º, —É—Å—Ç—Ä–∞–Ω—è—è –æ—à–∏–±–∫–∏ `00:00` –¥–ª—è –¥–∞—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ min/max —Ü–µ–Ω –∏–∑ –≤—Å–µ—Ö —Å–µ–∫—Ç–æ—Ä–æ–≤.
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ–º).

## [1.7.3] - 2026-01-02

### Added
- **3D Preview**: Added "Only New" button to `/3di` command. Allows generating missing previews for new events without reprocessing existing ones.
- **Pyramida**: Fixed price parsing from ticket widget. Now extracts specific prices (e.g. "500 ‚ÇΩ") and price ranges ("500 - 1000 ‚ÇΩ"), ensuring correct `ticket_status` ("available" instead of "unknown").

## [1.7.2] - 2026-01-02

### Changed
- **3D Preview Aesthetics**:
    - **Soft Shadows**: Increased light source angle to 10¬∞ for softer, more realistic shadows.
    - **Cinematic Rotation**: The first card in the stack is now slightly rotated (-3¬∞) for a more dynamic look.

## [1.7.1] - 2026-01-02

### Fixed
- **3D Preview**: Fixed argument parsing in `/3di` command to support running from image captions and avoid errors when `message.text` is None (aiogram v3 compatibility).

## [1.7.0] - 2026-01-02

### Added
- **3D Preview**: Added `/3di multy` command mode. Generates previews only for events with 2 or more images, filtering out single-image events.
- **3D Preview**: Improved lighting with a new "Shadow Lift" fill light. This makes cards 2, 3, and 4 readable by softening the hard shadows while maintaining the dramatic texture.

## [1.6.11] - 2026-01-02

### Changed
- **Configuration**: Increased Kaggle polling timeout from 30 minutes to 4 hours to accommodate CPU fallback scenarios.

## [1.6.10] - 2026-01-01

### Fixed
- **Source Parsing**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ `short_description` –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∏–∑ `/parse`. –£—Å–∏–ª–µ–Ω –ø—Ä–æ–º–ø—Ç LLM ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `short_description` (REQUIRED –ø–æ–ª–µ, one-sentence summary —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏). –£–±—Ä–∞–Ω fallback –Ω–∞ `full_description` (–º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç), fallback –Ω–∞ title –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º warning.
- **Special Pages**: Added support for 3D generated previews (`preview_3d_url`) in special pages. If available, the 3D preview is used as the main event image, prioritizing it over regular photos.

## [1.6.9] - 2026-01-01

### Changed
- **3D Preview**: Changed the Blender background color from dark gray to pure Black (#000000) for better integration with both light and dark Telegraph themes.

## [1.6.8] - 2026-01-01

### Refinements
- **3D Preview**:
  - **Cover Logic**: 3D preview is now used as the Telegraph page cover ONLY if the event has 2 or more source photos. If there is only 1 photo, the original is preserved.
  - **Transparency**: Added a dark background to the Blender scene to fix transparency rendering issues in Telegraph.
  - **Composition**: Improved layout for single images (< 3 photos) to use a centered single plane instead of the carousel.

### Refined
- **3D Preview**: Use the preview image as the leading Telegraph photo, add a dark scene background, and simplify layout when fewer than three images are available.

## [1.6.7] - 2026-01-01

### Fixed
- **3D Preview**: Fixed critical bug where database session variable shadowed the user session dictionary, causing "AsyncSession object does not support item assignment" error.

## [1.6.6] - 2026-01-01

### Performance
- **3D Preview**:
  - Notebook now cleans up Blender binaries and input files before completion, leaving only `output.json`. This dramatically speeds up the result download (from minutes to seconds) and prevents timeouts.
  - Handler now actively cleans up temporary download directories in `/tmp` to save disk space.

## [1.6.5] - 2026-01-01

### Fixed
- **3D Preview**:
  - Increased output download retry limit to 10 attempts (50s total timeout).
  - Implemented automatic Month Page rebuild triggering after 3D preview application.
  - Added detailed final report in Telegram with links to the updated month page and events.

## [1.6.4] - 2026-01-01

### Fixed
- **3D Preview**: Added 3 retry attempts for downloading output.json from Kaggle (handles API race conditions).

## [1.6.3] - 2026-01-01

### Fixed
- **3D Preview**: Added 15s delay after dataset creation in handler (syncing pattern with video_announce) to ensure dataset availability before kernel start.

## [1.6.2] - 2026-01-01

### Fixed
- **3D Preview**: Added 60s retry loop for payload detection in Kaggle notebook to handle dataset mounting latency.

## [1.6.1] - 2026-01-01

### Fixed
- **3D Preview**:
  - Fixed payload path detection in Kaggle notebook (now uses `rglob`).
  - Added "fail fast" logic in notebook if payload is missing.
  - Implemented live status updates in Telegram message during polling.
  - Added `asyncio.Lock` to serialize concurrent generation requests.
  - Fixed output directory collisions by using per-session paths.

## [1.6.0] ‚Äì 2026-01-01

### Added
- **3D Preview Feature**:
  - Added `preview_3d_url` to `Event` model.
  - Created `/3di` command for generating 3D previews using Kaggle.
  - Implemented Kaggle orchestration pipeline (dataset -> kernel -> polling -> db update).
  - Added support for GPU rendering on Kaggle.
  - Integrated 3D previews into Telegraph month pages (displayed as main image).

## [1.5.3] ‚Äì 2026-01-01
- **Performance**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è LLM-–≤—ã–∑–æ–≤–æ–≤ –≤ `/parse` ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ `find_existing_event` —Å `upsert_event`. –¢–µ–ø–µ—Ä—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –¥–æ –≤—ã–∑–æ–≤–∞ LLM, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## [1.5.2] ‚Äì 2025-12-31
- **Logging**: –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—ã–±–æ—Ä kernel, –ø—É—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ kernel –∏ —Å–æ—Å—Ç–∞–≤ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ push –≤ Kaggle.

## [1.5.1] ‚Äì 2025-12-31
- **Fix**: –í –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ payload –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω —à–∞–≥ –≤—ã–±–æ—Ä–∞ kernel –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å 403.
## [1.5.0] ‚Äì 2025-12-31
- **Fix**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–∞—Å–∫–∞ MoviePy –≤ Kaggle-–Ω–æ—É—Ç–±—É–∫–µ `video_afisha.ipynb` ‚Äî –º–∞—Å–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è 2D –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ blit.
- **Feature**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å payload" –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∞ –≤–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ `payload.json` –±–µ–∑ —ç—Ç–∞–ø–∞ –ø–æ–¥–±–æ—Ä–∞ —Å–æ–±—ã—Ç–∏–π.

## [1.4.6] ‚Äì 2025-12-31
- **Fix**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ `/special`: —Å–æ–±—ã—Ç–∏—è –±–æ–ª—å—à–µ –Ω–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –æ—à–∏–±–æ—á–Ω–æ —É–∫–∞–∑–∞–Ω `end_date` –≤ –ø—Ä–æ—à–ª–æ–º (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `max(date, end_date)`).
- **Refinement**: –û—á–∏—Å—Ç–∫–∞ –æ–ø–∏—Å–∞–Ω–∏–π –ú—É–∑—Ç–µ–∞—Ç—Ä–∞ –∏ –ö–∞—Ñ–µ–¥—Ä–∞–ª—å–Ω–æ–≥–æ —Å–æ–±–æ—Ä–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
- **Fix**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –í–µ—Å–µ–ª–æ–≤–∫–µ.
- **Infrastructure**: –í–≤–µ–¥–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –∏–∑–æ–ª—è—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –ø–∞–ø–∫–µ `scripts/`.

## [1.4.5] ‚Äì 2025-12-31

### Fixed
- **Muzteatr Parser**: Fixed empty descriptions by extracting text from `og:description` meta tags (site structure changed).

## [1.4.4] - 2025-12-31

### Fixed
- **Dramteatr Parser**: Fixed DOM traversal issue where date block was missed because it is a sibling of the link wrapper.

## [1.4.3] - 2025-12-31

### Fixed
- **Dramteatr Parser**: Fixed date extraction (incomplete dates like "31 –î–ï–ö–ê–ë–†") using CSS selectors.
- **Parsing**: Improved duplicate detection with fuzzy title matching (Codex).
- **Video Announce**: Filter out "sold_out" events from video digests by default.
- **UI**: Minor adjustment to ticket icon order in summaries.

## [1.4.2] - 2025-12-31

### Changed
- **Source Parsing**: –£–ª—É—á—à–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π (parser.py) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.
- **Source Parsing**: –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (per-event logging) —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (LLM usage, duration).

## [1.4.1] - 2025-12-31

### Fixed
- **Source Parsing**: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –±–ª–æ–∫–∏ –î—Ä–∞–º—Ç–µ–∞—Ç—Ä–∞ –∏ –ú—É–∑—Ç–µ–∞—Ç—Ä–∞ –≤ –Ω–æ—É—Ç–±—É–∫–µ `ParseTheatres`.

## [1.4.0] - 2025-12-31

### Added
- **Special Pages**: –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ `/special` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö Telegraph-—Å—Ç—Ä–∞–Ω–∏—Ü. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (1‚Äì14 –¥–Ω–µ–π), –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –±–ª–æ–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤—Ä–µ–º–µ–Ω–∞–º–∏), –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–æ–∂–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ Telegraph.
- **Special Pages**: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–∫–∞—Ü–∏–π –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–µ–π –∞–¥—Ä–µ—Å–æ–≤).
- **Special Pages**: –£–ª—É—á—à–∏–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –≤ —Ñ—É—Ç–µ—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
- **Source Parsing**: –£–ª—É—á—à–µ–Ω Kaggle-–Ω–æ—É—Ç–±—É–∫ `ParsePyramida` –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞.

### Fixed
- **System**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç `sys.modules` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞, –≤—ã–∑—ã–≤–∞–≤—à–∏–π –æ—à–∏–±–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`get_db() -> None`) –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –º–æ–¥—É–ª—è—Ö.
- **Month/Weekend Pages**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –º–µ—Å—è—Ü–µ–≤ –∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö –≤ Telegraph. –¢–µ–ø–µ—Ä—å –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "_31 –¥–µ–∫–∞–±—Ä—è 19:00, –ú–µ—Å—Ç–æ, –ì–æ—Ä–æ–¥_".

### Fixed

## [1.3.7] - 2025-12-31

### Added
- **Telegraph**: –¢–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Å–æ–±—ã—Ç–∏–π —Ç–µ–ø–µ—Ä—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ (—Å—Å—ã–ª–∫–∏ `tel:`). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: +7, 8, –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞.
- **Performance**: –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü (Deferred Rebuilds) ‚Äî –∑–∞–¥–∞—á–∏ `month_pages` –∏ `weekend_pages` –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –Ω–∞ 15 –º–∏–Ω—É—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π.
- **Conditional Images**: –ù–∞ –º–µ—Å—è—á–Ω—ã—Ö –∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö Telegraph –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π, –µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–µ–Ω–µ–µ 10 —Å–æ–±—ã—Ç–∏–π.
- **EVENT_UPDATE_SYNC**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

### Changed
- **/parse limit**: –õ–∏–º–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π —Å–Ω–∏–∂–µ–Ω —Å 10 –¥–æ 5 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.
- **/parse rebuild**: –£–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ—Å–ª–µ `/parse` ‚Äî —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

### Fixed
- **/parse month_pages**: –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ `/parse` —Ç–µ–ø–µ—Ä—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ `month_pages` –¥–ª—è –≤—Å–µ—Ö –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –º–µ—Å—è—Ü–µ–≤ for deferred rebuild.
- **Deferred Rebuilds**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –æ–±—Ö–æ–¥ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî `_drain_nav_tasks` –±–æ–ª—å—à–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ follow-up –∑–∞–¥–∞—á–∏ –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è event_id. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü Telegraph.
- **VK Inbox**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Telegraph —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –æ—Ç—á—ë—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É ("‚úÖ Telegraph ‚Äî "). –¢–µ–ø–µ—Ä—å –±–æ—Ç –æ–∂–∏–¥–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ç–≤–µ—Ç–∞ (–¥–æ 10 —Å–µ–∫—É–Ω–¥).
- **Deferred Rebuilds**: –£–±—Ä–∞–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ `refresh_month_nav` –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –º–µ—Å—è—Ü–∞, –≤—ã–∑—ã–≤–∞–≤—à–∏–π –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü. –¢–µ–ø–µ—Ä—å –Ω–æ–≤—ã–µ –º–µ—Å—è—Ü—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å.
- **Deferred Rebuilds**: `schedule_event_update_tasks` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `drain_nav=False`, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è —Å–æ–±–ª—é–¥–µ–Ω–∏–µ 15-–º–∏–Ω—É—Ç–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π.
- **Deferred Rebuilds TTL**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ (expiration) –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á ‚Äî TTL —Ç–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`next_run_at`), –∞ –Ω–µ –æ—Ç –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (`updated_at`). –†–∞–Ω–µ–µ –∑–∞–¥–∞—á–∏ —Å 15-–º–∏–Ω—É—Ç–Ω–æ–π –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é –∏—Å—Ç–µ–∫–∞–ª–∏ —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç (TTL=600—Å).
- **Rebuild Notifications**: –ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–µ–ø–µ—Ä—å —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ—á–Ω–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤.
- **Navigation Update**: –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –Ω–æ–≤—ã–π –º–µ—Å—è—Ü (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ê–ø—Ä–µ–ª—å) —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ñ—É—Ç–µ—Ä—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–Ø–Ω–≤–∞—Ä—å, –§–µ–≤—Ä–∞–ª—å –∏ —Ç.–¥.).
- **Year Suffix**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ–¥–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ‚Äî "2026" –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –Ø–Ω–≤–∞—Ä—é –∏–ª–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –≥–æ–¥–∞, –∞ –Ω–µ –∫–æ –≤—Å–µ–º –º–µ—Å—è—Ü–∞–º.
- **Spam Removal**: –£–¥–∞–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è `NAV_WATCHDOG`, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –≤ —á–∞—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ.
- **Retry Logic**: –ü—Ä–∏ –æ—à–∏–±–∫–µ `CONTENT_TOO_BIG` —Ñ–ª–∞–≥ `show_images` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ—Ç—Ä–∞–π.
- **Test Stability**: `main_part2.py` —Ç–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é (fallback –¥–ª—è `LOCAL_TZ`, `format_day_pretty`).
- **Photo URL Validation**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã `http` –¥–ª—è `photo_urls`.

## [1.3.5] - 2025-12-29

### Fixed
- **Pyramida**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ `DD.MM.YYYY HH:MM` (–Ω–∞–ø—Ä–∏–º–µ—Ä `21.03.2026 18:00`). –†–∞–Ω–µ–µ —Ç–∞–∫–∏–µ –¥–∞—Ç—ã –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª–∏—Å—å –∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å.

## [1.3.4] - 2025-12-29

### Fixed
- **Pyramida**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ ("missing FSInputFile"), –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è JSON —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ø–∞—Ä—Å–∏–Ω–≥–∞.
- **Pyramida**: –í–∫–ª—é—á–µ–Ω–æ OCR –¥–ª—è —Å–æ–±—ã—Ç–∏–π, –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ VK Review (—Ä–∞–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–ª–æ —Ç–æ–ª—å–∫–æ –¥–ª—è `/parse`).

## [1.3.3] - 2025-12-29

### Fixed
- **Pyramida**: –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–±–æ—Ç—ã Kaggle (Running/Poling) –≤ —á–∞—Ç–µ. –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ—É—Ç–±—É–∫–∞.

## [1.3.2] - 2025-12-29

### Added
- **Source Parsing**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ OCR (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞) –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∏–∑ Pyramida –∏ /parse. –¢–µ–ø–µ—Ä—å –∞—Ñ–∏—à–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è, —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∏ —Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è.

## [1.3.1] - 2025-12-29

### Fixed
- **Pyramida**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π (–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è Playwright/BS4)
- **Pyramida**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ JSON —Ñ–∞–π–ª–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ —á–∞—Ç
- **Docs**: –£—Ç–æ—á–Ω–µ–Ω–æ, —á—Ç–æ OCR –¥–ª—è Pyramida –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

## [1.3.0] - 2025-12-29

### Added
- **Pyramida extraction**: –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ "üîÆ –ò–∑–≤–ª–µ—á—å –∏–∑ Pyramida" –≤ VK review flow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–±—ã—Ç–∏–π —Å pyramida.info. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –∏–∑ –ø–æ—Å—Ç–∞, –∑–∞–ø—É—Å–∫–∞–µ—Ç Kaggle notebook, –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ –±–∞–∑—É. –°–º. [docs/PYRAMIDA.md](docs/PYRAMIDA.md)
- **Pyramida manual input**: –ö–Ω–æ–ø–∫–∞ "üîÆ Pyramida" –≤ –º–µ–Ω—é /start (–¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–≤) –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞

## [1.2.17] - 2025-12-29



### Added
- **source_parsing**: –ù–æ–≤—ã–π Kaggle-–Ω–æ—É—Ç–±—É–∫ `ParseTheatres` —Å –ø–æ–ª–µ–º `description`
- **docs**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `/parse` –≤ `docs/pipelines/source-parsing.md`

### Fixed
- **source_parsing**: –°–æ–±—ã—Ç–∏—è –∏–∑ `/parse` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–º –∞–Ω–æ–Ω—Å–µ ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–¥—Å—á—ë—Ç –Ω–æ–≤—ã—Ö vs –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- **source_parsing**: –û—Ç—á—ë—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π (—Ä–∞–Ω–µ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å)
- **source_parsing**: –î–æ–±–∞–≤–ª–µ–Ω–æ debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `find_existing_event` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **source_parsing**: –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–ø–µ—Ä—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞
- **source_parsing**: –ü–æ–ª–µ `description` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –ë–î –∏–∑ –ø–∞—Ä—Å–µ—Ä–∞

## [1.2.15] - 2025-12-28

### Fixed
- **source_parsing**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π ‚Äî —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `persist_event_and_pages` –≤–º–µ—Å—Ç–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `persist_event_draft`
- **source_parsing**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ JSON —Ñ–∞–π–ª–æ–≤ –∏–∑ Kaggle –≤ –æ—Ç–≤–µ—Ç –Ω–∞ `/parse`
- **source_parsing**: –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

## [1.2.14] - 2025-12-28

### Added
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è `source_parsing` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/parse`:
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–∞–≤
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—Ç–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Kaggle-–Ω–æ—É—Ç–±—É–∫–∞
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

## [1.2.13] - 2025-12-28

### Fixed
- –£–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç `about_fill_prompt` –¥–ª—è –≤–∏–¥–µ–æ–∞–Ω–æ–Ω—Å–æ–≤: —Ç–µ–ø–µ—Ä—å LLM —è–≤–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç title –≤ about –∫–æ–≥–¥–∞ ocr_title –ø—É—Å—Ç.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ about –≤ `selection_prompt` –∏ `about_fill_prompt`.

## [1.2.1] - 2025-12-27

### Fixed
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–Ω–µ–π ("—Å—É–±–±–æ—Ç–∞/–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ") –Ω–∞ –º–µ—Å—è—á–Ω—ã—Ö Telegraph-—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–∏ –∏–Ω–∫—Ä–µ–º –µ–Ω—Ç–∞–ª—å–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## [1.2.0] - 2025-12-27
### Fixed
- Fixed critical `TypeError` in video announce generation caused by mismatched arguments in `about` text normalization calls across `scenario.py`, `selection.py`, and `finalize.py`.

## [1.1.1] - 2025-12-27
### Fixed
- Fixed bug where `search_digest` was not saved to database during event creation via text import.
- Updated `about_fill_prompt` to preserve proper nouns (e.g. "–û–î–ò–ù –î–û–ú–ê") in about text.
- Removed anchor prepending logic in `about.py`, making LLM fully responsible for about text generation.
- Updated agent instructions to require explicit user command for production deployment.

<!-- –ù–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è–π —Å—é–¥–∞ -->
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å Kaggle: —Ç–µ–ø–µ—Ä—å `poller.py` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç –ª–æ–≥–∏ –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –ø–∞–∫—É–µ—Ç –∏—Ö –≤ zip-–∞—Ä—Ö–∏–≤, –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –±–æ–ª—å—à–µ 10.

---

## [1.1.0] ‚Äì 2025-12-27

### Added

- **–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤**: –≤ UI –≤—ã–±–æ—Ä–∞ —Å–æ–±—ã—Ç–∏–π –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ ¬´+ –í—Å–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã¬ª, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—â–∞—è –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π –≤ 5-–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.
- **–≠–∫—Ä–∞–Ω —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏**: –∫–Ω–æ–ø–∫–∞ ¬´üîÄ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞¬ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ ‚¨ÜÔ∏è/‚¨áÔ∏è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –ø–æ–∫–∞–∑–∞ –≤ –≤–∏–¥–µ–æ.
- **–¢–µ–∫—É—â–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ**: –µ—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è —Å—É–±–±–æ—Ç–∞ –∏–ª–∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, –≤ –ø–µ—Ä–∏–æ–¥–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–≤–µ –∫–Ω–æ–ø–∫–∏ ‚Äî ¬´–≠—Ç–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ (–¥–∞—Ç–∞)¬ª –∏ ¬´–í—ã—Ö–æ–¥–Ω—ã–µ (—Å–ª–µ–¥—É—é—â–∞—è –¥–∞—Ç–∞)¬ª.

---

## [1.0.0] ‚Äì 2025-12-27

> **–ü–µ—Ä–≤—ã–π –º–∞–∂–æ—Ä–Ω—ã–π —Ä–µ–ª–∏–∑** ‚Äî –≤–≤–µ–¥–µ–Ω–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (SemVer).

### Added

- –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ: –¥–æ–±–∞–≤–∏–ª–∏ –∏–º–ø–æ—Ä—Ç `dataclass` –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞–ª—å–±–æ–º–æ–≤ –≤ –≤–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö.
- –í–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –∏—Å–∫–∞–∂–∞—Ç—å LLM-–æ–ø–∏—Å–∞–Ω–∏—è: —Å—Ç—Ä–æ–∫–∏ `about` —Ç–µ–ø–µ—Ä—å –ª–∏—à—å –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤/—ç–º–æ–¥–∑–∏, –∞ —É—Å–µ—á–µ–Ω–∏–µ –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–ª–æ–≤ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
- –ü–µ—Ä–µ–≤–µ–ª–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–µ–∑–æ–Ω–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –Ω–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç `DD.MM` –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ —Å—Ç–æ–ª–±–µ—Ü `tolerance_days` –∏ –æ–±–Ω–æ–≤–∏–ª–∏ –ø–∞—Ä—Å–µ—Ä –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç.
- `/vk_misses` superadmins review fresh Supabase samples: the bot pulls post text, up to ten images, filter reasons, and matched keywords from `vk_misses_sample`, adds ¬´–û—Ç–∫–ª–æ–Ω–µ–Ω–æ –≤–µ—Ä–Ω–æ¬ª/¬´–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É¬ª buttons, and records revision notes for the latter in `VK_MISS_REVIEW_FILE` (defaults to `/data/vk_miss_review.md`).
- –î–æ–±–∞–≤–∏–ª–∏ `/ik_poster`, –≤—ã–Ω–µ—Å–ª–∏ –ª–æ–≥–∏–∫—É –≤ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å `imagekit_poster.py`, –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ImageKit –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π —á–∞—Ç.
- –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±–ª–æ–∂–∫–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ¬´–î–æ–±–∞–≤–∏—Ç—å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—é¬ª: —Ñ–∏—á–∞ –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ Telegram-–ø–æ—Ç–æ–∫ `festimgadd` –≤ `main.py`, –±–æ—Ç –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Ç—É–¥–∞ —Ñ–∞–π–ª—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ–±–ª–æ–∂–∫—É –≤ –∞–ª—å–±–æ–º–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
- –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –∫—Ä–æ—Å—Å-–±–∞–∑–æ–≤—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å `festival.activities_json`: SQLite —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø–æ–ª—è, –∑–∞–∫—Ä—ã–≤–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—é —Å –∫—Ä—ç—à–µ–º.
- `GROUNDED_ANSWER_MODEL_ID` —Ç–µ–ø–µ—Ä—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ `gemini-2.5-flash-lite`, —á—Ç–æ–±—ã grounded-–æ—Ç–≤–µ—Ç—ã consistently —à–ª–∏ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å.
- –î–æ–±–∞–≤–∏–ª–∏ –ø–∞–π–ø–ª–∞–π–Ω –≤–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å–æ–≤: –Ω–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ `videoannounce_session` / `videoannounce_item` / `videoannounce_eventhit` —Ö—Ä–∞–Ω—è—Ç —Å—Ç–∞—Ç—É—Å—ã, –æ—à–∏–±–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –≤–∫–ª—é—á–µ–Ω–∏–π, –∞ watchdog –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∑–∞—Å—Ç—Ä—è–≤—à–∏–µ —Ä–µ–Ω–¥–µ—Ä—ã –≤ `FAILED`.
- –í `/events` –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ `üé¨` —Å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º —Å—á—ë—Ç—á–∏–∫–æ–º 0‚Üí5: –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–µ–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º/—Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞–º (–ø–∞—Ä—Ç–Ω—ë—Ä—ã –ø—Ä–∞–≤—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–æ–±—ã—Ç–∏—è) –∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏—è –≤ —Ä–æ–ª–∏–∫; –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–æ–ª–∏–∫–∞ —Å—á—ë—Ç—á–∏–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è.
- `/v` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—Å–∫–æ–µ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª–µ–π —Å –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏, –ø–æ–∫–∞–∑–æ–º –ø—è—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–π —É–ø–∞–≤—à–µ–π; –ø–æ–∫–∞ Kaggle-—Ä–µ–Ω–¥–µ—Ä –≤ —Å—Ç–∞—Ç—É—Å–µ `RENDERING`, UI –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.
- Kaggle-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –≤–∏–¥–µ–æ: —Å–±–æ—Ä JSON-–ø–µ–π–ª–æ–∞–¥–∞, –ø—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏ kernel, —Ç—Ä–µ–∫–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ `run_kernel_poller`, –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—á—ë—Ç–∫–∏ —á–µ—Ä–µ–∑ `/kaggletest`.
- –ì–æ—Ç–æ–≤—ã–π —Ä–æ–ª–∏–∫ –∏ –ª–æ–≥–∏ —É—Ö–æ–¥—è—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π —á–∞—Ç); –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –≤–∏–¥–µ–æ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Ç—É–¥–∞ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏–º—è —Ñ–∞–π–ª–∞. –°–æ–±—ã—Ç–∏—è –∏–∑ —Ä–æ–ª–∏–∫–∞ –ø–æ–º–µ—á–∞—é—Ç—Å—è `PUBLISHED_MAIN` –∏ —Ç—Ä–∞—Ç—è—Ç –æ–¥–Ω—É –µ–¥–∏–Ω–∏—Ü—É –≤–∫–ª—é—á–µ–Ω–∏—è.
- –ò—Å–ø—Ä–∞–≤–∏–ª–∏ SQLite-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å–æ–≤: —Ç–∞–±–ª–∏—Ü–∞ `videoannounce_session` —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ `profile_key`, `test_chat_id` –∏ `main_chat_id`, —á—Ç–æ–±—ã –º–µ–Ω—é `/v` –Ω–µ –ø–∞–¥–∞–ª–æ –Ω–∞ —Å—Ç–∞—Ä—ã—Ö –±–∞–∑–∞—Ö.
- –†–∞—Å—à–∏—Ä–∏–ª–∏ SQLite-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å–æ–≤: –¥–æ–±–∞–≤–ª—è–µ–º `published_at`, `kaggle_dataset` –∏ `kaggle_kernel_ref`, —á—Ç–æ–±—ã —Å–µ–ª–µ–∫—Ç—ã `/v` –Ω–µ –ª–æ–º–∞–ª–∏—Å—å –Ω–∞ —Å—Ç–∞—Ä—ã—Ö –±–∞–∑–∞—Ö.
- –í–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–Ω—Ç—Ä–æ –æ—Ç LLM –ø–æ—Å–ª–µ –ø–æ–¥–±–æ—Ä–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –ø—Ä–∞–≤–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ JSON-—Ñ–∞–π–ª–∞ –∏ –∑–∞–ø—É—Å–∫–∞ Kaggle; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `selection_params`, –∞ JSON –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ —Ñ–∞–π–ª –ø—Ä–∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∏ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.
- –í–∏–¥–µ–æ-–∞–Ω–æ–Ω—Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±–∏—Ä–∞–µ—Ç –µ–¥–∏–Ω—ã–π JSON-–∑–∞–ø—Ä–æ—Å —Å –ø—Ä–æ–º–ø—Ç–æ–º, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏, –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏, `response_format` –∏ `meta` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ 4o –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π —á–∞—Ç –¥–∞–∂–µ –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

### Video Announce Intro Patterns (2025-12-27)

- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Ç—Ä–æ**: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –∏–Ω—Ç—Ä–æ-—ç–∫—Ä–∞–Ω–∞ –≤–∏–¥–µ–æ ‚Äî `STICKER`, `RISING`, `COMPACT`. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤ UI —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –ø—Ä–µ–≤—å—é –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º.
- **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–≤—å—é –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**: –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å `video_announce/pattern_preview.py` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç PNG-–ø—Ä–µ–≤—å—é –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ Kaggle.
- **–ì–æ—Ä–æ–¥–∞ –∏ –¥–∞—Ç—ã –≤ –∏–Ω—Ç—Ä–æ**: `payload_as_json()` –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≥–æ—Ä–æ–¥–∞ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –∏–∑ —Å–æ–±—ã—Ç–∏–π –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ –Ω–æ—É—Ç–±—É–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∏–Ω—Ç—Ä–æ.
- **–®—Ä–∏—Ñ—Ç Bebas Neue**: –∑–∞–º–µ–Ω—ë–Ω —à—Ä–∏—Ñ—Ç Oswald –Ω–∞ Bebas Neue Bold –¥–ª—è Better Cyrillic rendering –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–º—É –¥–∏–∑–∞–π–Ω—É.
- **Fly-out –∞–Ω–∏–º–∞—Ü–∏—è Sticker**: –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç–∏–∫–µ—Ä—ã –≤—ã–ª–µ—Ç–∞—é—Ç —Å overshoot-—ç—Ñ—Ñ–µ–∫—Ç–æ–º –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞–∫–ª–æ–Ω–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.
- **–ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã**: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç—Ä–æ —Ç–µ–ø–µ—Ä—å —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç 15% –æ—Ç –≤—ã—Å–æ—Ç—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∫–∞–∫ –≤ –ø—Ä–µ–≤—å—é), –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π.
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤**: notebook —Ç–µ–ø–µ—Ä—å –∫–æ–ø–∏—Ä—É–µ—Ç `cities`, `date`, `pattern` –∏–∑ payload –≤ `intro_data`, –≥–æ—Ä–æ–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç—Ä–æ.
- **–î–∞–π–¥–∂–µ—Å—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ –∏–º–ø–æ—Ä—Ç–∞**: VK-–∏–º–ø–æ—Ä—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–µ `search_digest` —Å–æ–±—ã—Ç–∏—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–± —É—Å–ø–µ—Ö–µ.

## v0.3.17 ‚Äì 2025-10-07

- VK crawler telemetry now exports group metadata, crawl snapshots, and sampled misses to Supabase (`vk_groups`, `vk_crawl_snapshots`, `vk_misses_sample`) with `SUPABASE_EXPORT_ENABLED`, `SUPABASE_RETENTION_DAYS` (default 60 days), and `VK_MISSES_SAMPLE_RATE` governing exports, sampling, and automatic cleanup.
- VK stories now ask whether to collect extra editor instructions and forward the answer plus any guidance to the 4o prompts.
- –î–æ–±–∞–≤–ª–µ–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–µ–∑–æ–Ω–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ (`docs/reference/holidays.md`), –ø—Ä–æ–º–ø—Ç 4o —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –∏—Ö —Å –∞–ª–∏–∞—Å–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏, –∞ –∏–º–ø–æ—Ä—Ç —Å–æ–±—ã—Ç–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª–∏.
- Log OpenAI token usage through Supabase inserts (guarded by `BOT_CODE`) and ship the `/usage_test` admin self-test so operators can verify the inserts and share usage snapshots during release comms.
- `/stats` –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —Å–≤–æ–¥–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Supabase (`token_usage_daily`/`token_usage`) –∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞–¥–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–Ω–∞–ø—à–æ—Ç, —á—Ç–æ–±—ã –≤ —Ä–µ–ª–∏–∑–Ω—ã—Ö –æ—Ç—á—ë—Ç–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Å–≤–µ–∂–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

## v0.3.16 ‚Äì 2025-10-05
- Telegraph event source pages now include a ‚Äú–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–∫—Ç—ã‚Äù block with date/time, location, and ticket/free status, hiding each line when the underlying data is missing so operators know it‚Äôs conditional.
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞–≤—Ç–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Ç–µ–º—ã `FAMILY` –∏ `KIDS_SCHOOL`, –∫–æ–≥–¥–∞ —É —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–∞–Ω –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ü–µ–Ω–∑; —Å–º. –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ `main.py` (`EVENT_TOPIC_SYSTEM_PROMPT`) –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `docs/llm_topics.md`.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω-—á–∞—Ç –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞—é—Ç –ø–µ—Ä–≤—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Å–æ–±—ã—Ç–∏—è –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ Telegraph –∏ –∏—Å—Ö–æ–¥–Ω—ã–π VK-–ø–æ—Å—Ç, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥–ª–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é.
- Fixed VK weekday-based date inference so it anchors on the post‚Äôs publish date and skips phone-number fragments like `474-30-04`, preventing false matches in review notes.
- –°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ VK-—Ä–µ—Ä–∞–π—Ç—ã —Ç–µ–ø–µ—Ä—å –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ö—ç—à—Ç–µ–≥–∞–º–∏ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ–º —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `#—Å—Ç–µ–Ω–¥–∞–ø`, `#openair`, `#–¥–µ—Ç—è–º`, `#—Å–µ–º—å–µ`).
- –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –¥–æ–≤–µ—Ä—è–µ—Ç 4o –≤—ã–±–æ—Ä —Ç–µ–º—ã `KRAEVEDENIE_KALININGRAD_OBLAST`, –ª–æ–∫–∞–ª—å–Ω—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã, –∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º —É–¥–∞–ª–µ–Ω–∞.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ –ø—è—Ç–∏, –ø—Ä–æ–º–ø—Ç—ã 4o –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—ã–π –ª–∏–º–∏—Ç –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫—Ä–∞–µ–≤–µ–¥–µ–Ω–∏—é.
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é —Ç–µ–º—É `URBANISM`, —á—Ç–æ–±—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–Ω–æ–≤–∞ —Ä–∞–∑–ª–∏—á–∞–ª –≥–æ—Ä–æ–¥—Å–∫–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –Ω–µ —Å–º–µ—à–∏–≤–∞–ª –∏—Ö —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
- Month-page splitter final fallback now removes both ¬´–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å¬ª and ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª links, keeping oversized months deployable despite Telegraph size limits and closing the recent operator request.

- –ó–∞–ø—É—Å—Ç–∏–ª–∏ –Ω–∞—É—á–ø–æ–ø-–¥–∞–π–¥–∂–µ—Å—Ç: –≤ `/digest` –ø–æ—è–≤–∏–ª–∞—Å—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞, –∞ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –æ—Ç–±–∏—Ä–∞—é—Ç—Å—è –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ `SCIENCE_POP`, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥–ª–∏ –±—ã—Å—Ç—Ä–æ —Å–æ–±—Ä–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É.
- –í `/digest` –¥–æ–±–∞–≤–∏–ª–∏ –∫–Ω–æ–ø–∫—É –∫—Ä–∞–µ–≤–µ–¥–µ–Ω–∏—è, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫–∏ –ø–æ —Ç–µ–º–µ `KRAEVEDENIE_KALININGRAD_OBLAST` –±–µ–∑ —Ä—É—á–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

- Expanded THEATRE_CLASSIC and THEATRE_MODERN criteria to include canonical playwrights and contemporary production formats.
- `/digest` –¥–ª—è –≤—Å—Ç—Ä–µ—á –∏ –∫–ª—É–±–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–Ω—É –∏–Ω—Ç—Ä–æ –ø–æ `_MEETUPS_TONE_KEYWORDS`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ¬´–ø—Ä–æ—Å—Ç–æ—Ç–∞+–ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ¬ª –∏ –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Å–∏—Ç —Å–¥–µ–ª–∞—Ç—å –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∂–∏–≤–æ–º –æ–±—â–µ–Ω–∏–∏ –∏ –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥–µ, –µ—Å–ª–∏ –≤ –ø–æ–¥–±–æ—Ä–∫–µ –Ω–µ—Ç –∫–ª—É–±–æ–≤; –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤ `docs/digests.md`.
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –º–∏—Ç–∞–ø–æ–≤ –≤ `/digest` –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –ø–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–æ–º: –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—ã—Å—Ç–∞–≤–∫—É, –∫ –Ω–∞–∑–≤–∞–Ω–∏—é –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—è—Å–Ω–µ–Ω–∏–µ ¬´‚Äî —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è –≤—Å—Ç—Ä–µ—á–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤—ã—Å—Ç–∞–≤–∫–∏¬ª, –∫–∞–∫ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `docs/digests.md`.

## v0.3.15 ‚Äì 2025-10-04
- Clarified the 4o parsing prompt and docs for same-day theatre showtimes: posters with one date and multiple start times now yield separate theatre events instead of a single merged entry.
- Added admin digests for –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –º–∞—Ä–∫–µ—Ç—ã, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π/—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–µ–∞—Ç—Ä, –≤—Å—Ç—Ä–µ—á–∏ –∏ –∫–ª—É–±—ã –∏ –∫–∏–Ω–æ–ø–æ–∫–∞–∑—ã; –æ–±–Ω–æ–≤–ª—ë–Ω —Å–ø–∏—Å–æ–∫ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ —Ç–µ–º –∏ –º–µ–Ω—é /digest.
- Library events without explicit prices now default to free, so operators can spot the change in billing behavior.

## v0.3.14 ‚Äì 2025-09-23
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã HTML-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∞–±–∑–∞—Ü—ã –∏—Å—Ç–æ—Ä–∏–π –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º inline-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–∞—Ö.
- –£–±—Ä–∞–ª–∏ —Å–∏–º–≤–æ–ª–Ω–æ–µ —É—Å–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ `ask_4o`.
- –û—á–∏—â–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏—Å—Ç–æ—Ä–∏–π –æ—Ç VK-—Ä–∞–∑–º–µ—Ç–∫–∏.

## v0.3.13 ‚Äì 2025-09-22
- `/exhibitions` —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç –±—É–¥—É—â–∏–µ –≤—ã—Å—Ç–∞–≤–∫–∏ –±–µ–∑ `end_date`, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥–µ–ª–∏ –∏—Ö –∏ –º–æ–≥–ª–∏ —É–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ü–æ—á–∏–Ω–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã—Ö –æ–±–ª–æ–∂–µ–∫: —Ç–µ–ø–µ—Ä—å `photo_urls = NULL` –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –∏–º–ø–æ—Ä—Ç–∞.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–ª–æ–∂–µ–∫ —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ–π: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `photo_urls` –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º.
- –î–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–ª–æ–∂–∫–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞ —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ–π —á–µ—Ä–µ–∑ `/weekendimg`: –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- `/addevent`, —Ñ–æ—Ä–≤–∞—Ä–¥—ã –∏ VK-–æ—á–µ—Ä–µ–¥—å —Ç–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç –∞—Ñ–∏—à–∏ (–æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ Catbox+OCR), –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç —Ç–µ–∫—Å—Ç—ã –≤ LLM –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞—Å—Ö–æ–¥/–æ—Å—Ç–∞—Ç–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤.
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–µ—à–∏—Ä—É—é—Ç—Å—è –∏ —É–≤–∞–∂–∞—é—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –≤ 10 –º–ª–Ω —Ç–æ–∫–µ–Ω–æ–≤.
- Added `/ocrtest` diagnostic command, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∞—Ñ–∏—à –º–µ–∂–¥—É `gpt-4o-mini` –∏ `gpt-4o` —Å –ø–æ–∫–∞–∑–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤.
- Clarified the 4o parsing prompt to warn about possible OCR mistakes in poster snippets.
- `/events` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∫—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–∏–ª–µ—Ç—ã —á–µ—Ä–µ–∑ vk.cc –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É `–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ VK`, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å —Å—á—ë—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
- VK Intake –ø–æ–º–µ—â–∞–µ—Ç –ø–æ—Å—Ç—ã —Å –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –∏ –ø—É—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º –≤ –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–º–µ—á–∞–µ—Ç –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–º ¬´–û–∂–∏–¥–∞–µ—Ç OCR¬ª.
- –í VK-–æ—á–µ—Ä–µ–¥–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –∫–Ω–æ–ø–∫–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å (+ —Ñ–µ—Å—Ç–∏–≤–∞–ª—å)¬ª/¬´üìùüéâ ‚Ä¶¬ª, –∞ –∏–º–ø–æ—Ä—Ç —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–µ—Å—Ç–∏–≤–∞–ª—å –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–±—ã—Ç–∏–π.
- –ù–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —ç–∫—Ä–∞–Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ ¬´+ –î–æ–±–∞–≤–∏—Ç—å —Ñ–µ—Å—Ç–∏–≤–∞–ª—å¬ª: –æ–ø–µ—Ä–∞—Ç–æ—Ä –∂–º—ë—Ç –µ—ë, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è, –∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è LLM-–ø–æ—Ç–æ–∫ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–º–ø–æ—Ä—Ç —Å —è–≤–Ω—ã–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º.
- –£—Ç–æ—á–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –æ—á–µ—Ä–µ–¥–∏: URGENT —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–º 48‚ÄØ—á, –æ–∫–Ω–∞ SOON/LONG –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –Ω–∞ 14‚ÄØ/‚ÄØ30‚ÄØ–¥–Ω–µ–π, FAR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Å–∞ 3‚ÄØ/‚ÄØ2‚ÄØ/‚ÄØ6, –¥–∂–∏—Ç—Ç–µ—Ä –∑–∞–¥–∞—ë—Ç—Å—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É, –∞ —Å—Ç—Ä–∏–∫-–±—Ä–µ–π–∫–µ—Ä FAR —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ K=5 –Ω–µ-FAR –≤—ã–±–æ—Ä–æ–≤.
- –ò—Å—Ç–æ—Ä–∏–∏ –∏–∑ VK –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–≥–æ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç 4o: –±–æ—Ç —á–∏–Ω–∏—Ç –æ–ø–µ—á–∞—Ç–∫–∏, —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –∞–±–∑–∞—Ü—ã –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∏.
- Month pages retry publishing without ¬´–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å¬ª links when Telegraph rejects the split, preventing `/pages_rebuild` from failing on oversized months.
- –ù–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ VK-—Å—Å—ã–ª–∫–∏, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Å—Ç.
- –ò–º–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ –≤—Å—Ç—Ä–µ—á –∏–∑ VK-–æ—á–µ—Ä–µ–¥–∏ —Å–æ–∑–¥–∞—ë—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –≤—Å—Ç—Ä–µ—á–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π.
- –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤ –í–ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã `Pending | Skipped | Imported | Rejected` –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é.
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π Telegram-–∞–Ω–æ–Ω—Å —Ç–µ–ø–µ—Ä—å —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ Telegraph-—Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∏–∑ VK-–æ—á–µ—Ä–µ–¥–∏ (–∫—Ä–æ–º–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤).
- ¬´‚úÇÔ∏è –°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–µ—Ä–∞–π—Ç¬ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–∑–±–∏–≤–∫—É –Ω–∞ –∞–±–∑–∞—Ü—ã –≤–º–µ—Å—Ç–æ —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –æ–¥–∏–Ω –±–ª–æ–∫.
- VK source settings now store default ticket-link button text and prompt; ingestion applies the saved link only when a post lacks its own ticket or registration URL, keeping operator-provided links untouched.
- –ó–∞–ø—É—Å—Ç–∏–ª–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∞–π–¥–∂–µ—Å—Ç: –≤ `/digest` –ø–æ—è–≤–∏–ª–∞—Å—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞, –ø–æ–¥–±–æ—Ä –∏–¥—ë—Ç –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–Ω—Ç—Ä–æ.

- Introduced automatic topic classification with a closed topic list, editor display, and `/backfill_topics` command.
- Classifier/digest topic list now includes the `PSYCHOLOGY`, `THEATRE_CLASSIC`, and `THEATRE_MODERN` categories.
- Refreshed related documentation and tests so deploy notes match the current feature set.

- Fixed VK review queue issue where `vk_review.pick_next` recalculates `event_ts_hint` and auto-rejects posts whose event date
  disappeared or fell into the past (e.g., a 7 September announcement shown on 19 September).
- –ö–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ VK —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–≤–ø–∞–≤—à–∏–µ —Å–æ–±—ã—Ç–∏—è Telegraph –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏.

## v0.3.10 ‚Äì 2025-09-21
This release ships the updates that were previously listed under ‚ÄúUnreleased.‚Äù

- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ ¬´–î–æ–±–∞–≤–∏–ª–∏ –≤ –∞–Ω–æ–Ω—Å¬ª —Ç–µ–ø–µ—Ä—å –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `dd.mm`.
- `/events` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫—É –±—ã—Å—Ç—Ä–æ–≥–æ VK-—Ä–µ—Ä–∞–π—Ç–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ `‚úÇÔ∏è`/`‚úÖ`, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥–µ–ª–∏, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –ª–∏ —à–æ—Ä—Ç–ø–æ—Å—Ç.

## v0.3.12 ‚Äì 2025-09-21
### Added
- –î–æ–±–∞–≤–∏–ª–∏ JSON-–∫–æ–ª–æ–Ω–∫—É `aliases` —É —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ–π –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–∞—Ä—ã –∞–ª–∏–∞—Å–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç 4o, —á—Ç–æ–±—ã –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è.
- –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–µ—Å—Ç–∏–≤–∞–ª—è –ø–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ ¬´üß© –°–∫–ª–µ–∏—Ç—å —Å‚Ä¶¬ª, –∑–∞–ø—É—Å–∫–∞—é—â–∞—è –º–∞—Å—Ç–µ—Ä –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –¥—É–±–ª–µ–π —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å–æ–±—ã—Ç–∏–π –∏ –∞–ª–∏–∞—Å–æ–≤.

### Changed
- –ü–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ–π –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏/–ø–æ—Å—Ç–∞–º–∏.
- –ü—Ä–æ–º–ø—Ç 4o –¥–ª—è —Ñ–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç –æ–¥–∏–Ω –∞–±–∑–∞—Ü –¥–æ 350 –∑–Ω–∞–∫–æ–≤ –±–µ–∑ —ç–º–æ–¥–∑–∏, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–ª–∏—Å—å –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞.

## v0.3.11 ‚Äì 2025-09-20
### Added
- –í–≤–µ–ª–∏ —Ä—É—á–Ω–æ–π –±–ª–æ–∫ ¬´üåç –¢—É—Ä–∏—Å—Ç–∞–º¬ª –≤ Telegram –∏ VK —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª –∏ ¬´–ù–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª.
- –î–æ–±–∞–≤–∏–ª–∏ –º–µ–Ω—é –ø—Ä–∏—á–∏–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
- –î–æ–±–∞–≤–∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç `/tourist_export` –≤ `.jsonl`.

### Changed
- –û–±–Ω–æ–≤–∏–ª–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ–∞–∫—Ç–æ—Ä–æ–≤: `üéØ –ù–∞—Ü–µ–ª–µ–Ω –Ω–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤`, `üß≠ –£–Ω–∏–∫–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞`, `üé™ –§–µ—Å—Ç–∏–≤–∞–ª—å / –º–∞—Å—à—Ç–∞–±`, `üåä –ü—Ä–∏—Ä–æ–¥–∞ / –º–æ—Ä–µ / –ª–µ–Ω–¥–º–∞—Ä–∫ / –∑–∞–º–æ–∫`, `üì∏ –§–æ—Ç–æ–≥–µ–Ω–∏—á–Ω–æ / –µ—Å—Ç—å —á—Ç–æ –ø–æ—Å—Ç–∏—Ç—å`, `üç≤ –ú–µ—Å—Ç–Ω—ã–π –∫–æ–ª–æ—Ä–∏—Ç / –∫—É—Ö–Ω—è / –∫—Ä–∞—Ñ—Ç`, `üöÜ –ü—Ä–æ—Å—Ç–æ –¥–æ–±—Ä–∞—Ç—å—Å—è`.
- –û–±–Ω–æ–≤–∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ TTL: 15 –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–∏—á–∏–Ω –∏ 10 –º–∏–Ω—É—Ç –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.

### Security
- –î–æ—Å—Ç—É–ø –∫ –∫–Ω–æ–ø–∫–∞–º —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –º–µ—Ç–∫–∏ –∏ `/tourist_export` –æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–µ–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º; –∞–≤—Ç–æ—Ä–∞–∑–º–µ—Ç–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.

## v0.1.0 ‚Äì Deploy + US-02 + /tz
- Initial Fly.io deployment config.
- Moderator registration queue with approve/reject.
- Global timezone setting via `/tz`.

## v0.1.1 ‚Äì Logging and 4o request updates
- Added detailed logging for startup and 4o requests.
- Switched default 4o endpoint to OpenAI chat completions.
- Documentation now lists `FOUR_O_URL` secret.

## v0.2.0 ‚Äì Event listing
- `/events` command lists events by day with inline delete buttons.

## v0.2.1 ‚Äì Fix 4o date parsing
- Include the current date in LLM requests so events default to the correct year.

## v0.2.2 ‚Äì Telegraph token helper
- Automatically create a Telegraph account if `TELEGRAPH_TOKEN` is not set and
  save the token to `/data/telegraph_token.txt`.
## v0.3.0 - Edit events and ticket info
- Added ticket price fields and purchase link
- Inline edit via /events
- Duplicate detection improved with 4o

## v0.3.1 - Forwarded posts
- Forwarded messages from moderators trigger event creation
- Events keep `source_post_url` linking to the original announcement

## v0.3.2 - Channel registration
- `/setchannel` registers a forwarded channel for source links
- `/channels` lists admin channels with removal buttons
- Bot tracks admin status via `my_chat_member` updates

## v0.3.3 - Free events and telegraph updates
- Added `is_free` field with inline toggle in the edit menu.
- 4o parsing detects free events; if unclear a button appears to mark the event as free.
- Telegraph pages keep original links and append new text when events are updated.

## v0.3.4 - Calendar files
- Events can upload an ICS file to Supabase during editing.
- Added `ics_url` column and buttons to create or delete the file.
- Use `SUPABASE_BUCKET` to configure the storage bucket (defaults to `events-ics`).
- Calendar files include a link back to the event and are saved as `Event-<id>-dd-mm-yyyy.ics`.
- Telegraph pages show a calendar link under the main image when an ICS file exists.
- Startup no longer fails when setting the webhook times out.

## v0.3.5 - Calendar asset channel
- `/setchannel` lets you mark a channel as the calendar asset source.
- `/channels` shows the asset channel with a disable button.
- Calendar files are posted to this channel and linked from month and weekend pages.
- Forwarded posts from the asset channel show a calendar button.

## v0.3.6 - Telegraph stats

- `/stats` shows view counts for the past month and weekend pages, plus all current and upcoming ones.

- `/stats events` lists stats for event source pages sorted by views.

## v0.3.7 - Large month pages

- Month pages are split in two when the content exceeds ~64&nbsp;kB. The first
  half ends with a link to the continuation page.

## v0.3.8 - Daily announcement tweak

- Daily announcements no longer append a "–ø–æ–¥—Ä–æ–±–Ω–µ–µ" link to the event's
  Telegraph page.

## v0.3.9 - VK daily announcements

- Daily announcements can be posted to a VK group. Set the group with `/vkgroup` and adjust
  times via `/vktime`. Use the `VK_TOKEN` secret for API access.

## v0.3.10 - Festival stats filter and daily management updates

- `/stats` now lists festival statistics only for upcoming festivals or those
  that ended within the last week.
- `/regdailychannels` and `/daily` now show the VK group alongside Telegram channels.
  VK posting times can be changed there and test posts sent.
- Daily announcements include new hashtag lines for Telegram and VK posts.

## v0.3.11 - VK monitoring MVP and formatting tweaks

- Added `/vk` command for manual monitoring of VK communities: add/list/delete groups and review posts from the last three days.
- New `VK_API_VERSION` environment variable to override VK API version.
- VK daily posts show a calendar icon before "–ê–ù–û–ù–°" and include more spacing between events.
- Date, time and location are italicized if supported.
- Prices include `—Ä—É–±.` and ticket links move to the next line.
- The "–ø–æ–¥—Ä–æ–±–Ω–µ–µ" line now ends with a colon and calendar links appear on their own line as
  "üìÜ –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å: <link>".

## v0.3.12 - VK announcement fixes

- Remove unsupported italic tags and calendar line from VK posts.
- Event titles appear in uppercase and the "–ø–æ–¥—Ä–æ–±–Ω–µ–µ" link follows the
  description.
- A visible separator line now divides events to improve readability.

## v0.3.13 - VK formatting updates

- VK posts use two blank separator lines built with the blank braille symbol.
- Ticket links show a ticket emoji before the URL.
- Date lines start with a calendar emoji and the location line with a location pin.

## v0.3.14 - VK link cleanup

- Removed the "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–∞" prefix from month and weekend links in VK daily posts.

## v0.3.15 - Channel name context

- Forwarded messages include the Telegram channel title in 4o requests so the
  model can infer the venue.
- `parse_event_via_4o` also accepts the legacy `channel_title` argument for
  compatibility.

## v0.3.16 - Festival pages

- Added a `Festival` model and `/fest` command for listing festivals.
- Daily announcements now show festival links.
- Logged festival-related actions including page creation and edits.
- Festival pages automatically include an LLM-generated description and can be
  edited or deleted via `/fest`.

## v0.3.17 - Festival description update

- Festival blurbs use the full text of event announcements and are generated in
  two or three paragraphs via 4o.

## v0.3.18 - Festival contacts

- Festival entries store website, VK and Telegram links.
- `/fest` shows these links and accepts `site:`, `vk:` and `tg:` edits.
- **Edit** now opens a menu to update description or contact links individually.

## v0.3.19 - Festival range fix

- LLM instructions clarified: when festival dates span multiple days but only
  some performances are listed, only those performances become events. The bot
  no longer adds extra dates unless every day is described.

## v0.3.20 - Festival full name

- Festivals now store both short and full names. Telegraph pages and VK posts
  use the full name while events and lists keep the short version.
- `/fest` gained edit options for these fields. Existing records are updated
  automatically with the short name as the default full one.

## v0.3.21 - Partner activity reminder

- Partners receive a weekly reminder at 9‚ÄâAM if they haven't added events in
  the past seven days.
- The superadmin gets a list of partners who were reminded.

## v0.3.22 - Partner reminder frequency fix

- Partners who haven't added events no longer receive daily reminders; each
  partner is notified at most once a week.

## v0.3.23 - Weekend VK posts

- Creating a weekend Telegraph page now also publishes a simplified weekend
  post to VK and links existing weekend VK posts in chronological order.

## v0.3.24 - Weekend VK source filter

- Weekend VK posts include only events with existing VK source posts and no
  longer attempt to create source posts automatically.

## v0.3.25 - Daily VK title links

- Event titles in VK daily announcements link to their VK posts when available.

## v0.3.26 - Festival day creation

- Announcements describing a festival without individual events now create a
  festival page and offer a button to generate day-by-day events later.
- Existing databases automatically add location fields for festivals.

## v0.3.27 - Festival source text

- Festival descriptions are generated from the full original post text.
- Festival records store the original announcement in a new `source_text` field.

## v0.3.28 - VK user token

- VK posting now uses a user token. Set `VK_USER_TOKEN` with `wall,groups,offline` scopes.
- The group token `VK_TOKEN` is optional and used only as a fallback.

## v0.3.29 - Film screenings

- Added support for `–∫–∏–Ω–æ–ø–æ–∫–∞–∑` event type and automatic detection of film screenings.

## v0.3.30 - Festival ticket links

- Festival records support a `ticket_url` and VK/Telegraph festival posts show a ticket icon and link below the location.

## v0.3.31 - Unified publish progress

- Event publication statuses now appear in one updating message with inline status icons.

## v0.3.32 - Festival program links

- Festival records support a `program_url`. Telegraph festival pages now include a "–ü–†–û–ì–†–ê–ú–ú–ê" section with program and site links when provided, and the admin menu allows editing the program link.

## v0.3.33 - Lecture digest improvements

- Caption length for lecture digests now uses visible HTML text to fit up to 9 lines.
- Removed URL shortener functionality and related configuration.
- 4o title normalization returns lecturer names in nominative form with `–ò–º—è –§–∞–º–∏–ª–∏—è: –ù–∞–∑–≤–∞–Ω–∏–µ` layout.

## v0.3.34 - VK Intake & Review v1.1

- Added database tables and helpers for VK crawling and review queue.
- Introduced `vk_intake` module with keyword and date detection utilities.

## v0.3.35 - VK repost link storage

- Event records now include an optional `vk_repost_url` to track reposts in the VK afisha.

## v0.3.36 - VK crawl utility

- Introduced `vk_intake.crawl_once` for cursor-based crawling and enqueueing of
  matching posts.
- Dropped the unused VK publish queue in favor of operator-triggered reposts;
  documentation updated.

## v0.3.37 - VK inbox review

- The review flow now reads candidates from the persistent `vk_inbox` table.
- Operators can choose to repost accepted events to the Afisha VK group.
- Removed remaining references to the deprecated publish queue from docs.

## v0.3.38 - VK queue summary

- `/vk_queue` displays current inbox counts and offers a button to start the
  review flow.

## v0.3.39 - VK review UI polish

- Review flow now presents media cards with action buttons and logs rebuilds
  per month.
- Accepted events immediately send Telegraph and ICS links to the admin chat.
- The "üßπ –ó–∞–≤–µ—Ä—à–∏—Ç—å‚Ä¶" button rebuilds affected months sequentially.
- Operators can repost events to the Afisha VK group via a dedicated button
  storing the final post link.

## v0.3.40 - VK intake improvements

- Incremental crawling with pagination, overlap and optional 14‚Äëday backfill.
- Randomised group order and schedule jitter to reduce API load.
- Keyword detector switched to regex stems with optional `pymorphy3` lemma
  matching via `VK_USE_PYMORPHY`.
- Date and time parser recognises more Russian variants and returns precise
  timestamps for scheduling.

## v0.3.41 - VK group context for 4o

- VK event imports now send the group title to 4o so venues can be inferred from
  `docs/reference/locations.md` when posts omit them.

## v0.3.42 - VK review media
- VK review: –ø–æ–¥–¥–µ—Ä–∂–∞–Ω—ã —Ñ–æ—Ç–æ –∏–∑ —Ä–µ–ø–æ—Å—Ç–æ–≤ (copy_history), link-preview, doc-preview; –¥–ª—è video –±–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ –ø—Ä–µ–≤—å—é-–∫–∞—Ä—Ç–∏–Ω–∫–∏, –≤–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ–º

## v0.3.43 - Festival landing stats

- `/stats` now shows view counts for the festivals landing page.

## v0.3.44 - VK short posts

- VK review reposts now use safe `wall.post` with photo IDs.
- Added "‚úÇÔ∏è –°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–µ—Ä–∞–π—Ç" button that publishes LLM‚Äëcompressed text.

## v0.3.45 - VK shortpost preview

- "‚úÇÔ∏è –°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ä–µ—Ä–∞–π—Ç" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏
  –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤–∫–∏.
- –ü–æ—Å—Ç—ã –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É —Å –ø—Ä–µ–≤—å—é.

## v0.3.46 - Video announce ranking context

- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ–¥–±–æ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ LLM –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  Telegraph –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–º JSON –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∑–∞–ø—Ä–æ—Å–∞.
