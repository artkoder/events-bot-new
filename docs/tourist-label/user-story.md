# User Story: –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –º–µ—Ç–∫–∞ (—Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º)

## User Story

**–ö–∞–∫** –Ω–µ–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∞—Ñ–∏—à–∏,

**–Ø —Ö–æ—á—É** –ø–æ–º–µ—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∫–∞–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏–ª–∏ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∞–º, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã –∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π,

**–ß—Ç–æ–±—ã** —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–≥–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ—Ä–ø—É—Å —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ –≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–µ.

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

1. –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–±—ã—Ç–∏—è –≤ Telegram –∏ VK —Å–æ–¥–µ—Ä–∂–∏—Ç –±–ª–æ–∫ ¬´üåç –¢—É—Ä–∏—Å—Ç–∞–º¬ª —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º (`–î–∞`/`–ù–µ—Ç`/`‚Äî`), —Å—á—ë—Ç—á–∏–∫–æ–º –ø—Ä–∏—á–∏–Ω –∏ –æ—Ç–º–µ—Ç–∫–æ–π –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
2. –ë–∞–∑–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π –≤–∫–ª—é—á–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ ¬´–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª, ¬´–ù–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª, ¬´–ü—Ä–∏—á–∏–Ω—ã¬ª, ¬´‚úçÔ∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª; –µ—Å–ª–∏ `tourist_note` –Ω–µ –ø—É—Å—Ç, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è ¬´üßΩ –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª.
3. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª –∏–ª–∏ ¬´–ù–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç—É—Ä–∏—Å—Ç–∞–º¬ª –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è `tourist_label`, `tourist_label_by`, `tourist_label_at` (UTC) –∏ `tourist_label_source="operator"`, –∫–∞—Ä—Ç–æ—á–∫–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ –ª–æ–≥ —É—Ö–æ–¥–∏—Ç `tourist_label_update` —Å `event_id` –∏ `user_id`.
4. –ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–∏—á–∏–Ω—ã¬ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ `‚úÖ/‚ûï` –¥–ª—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤:
   - `üéØ –ù–∞—Ü–µ–ª–µ–Ω –Ω–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤`
   - `üß≠ –£–Ω–∏–∫–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞`
   - `üé™ –ö—Ä—É–ø–Ω—ã–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ`
   - `üåä –ü—Ä–∏—Ä–æ–¥–∞ –∏–ª–∏ –∑–Ω–∞–∫–æ–≤–æ–µ –º–µ—Å—Ç–æ`
   - `üì∏ –§–æ—Ç–æ–≥–µ–Ω–∏—á–Ω–æ, –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –±–ª–æ–≥–µ—Ä–∞–º`
   - `üç≤ –ú–µ—Å—Ç–Ω—ã–π –∫–æ–ª–æ—Ä–∏—Ç –∏ —Ä–µ–º—ë—Å–ª–∞`
   - `üöÜ –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞`
   –í—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `tourist_factors` –≤ –ø–æ—Ä—è–¥–∫–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞, –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–∏—à–µ—Ç –ª–æ–≥ `tourist_factor_toggle`.
5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—é –ø—Ä–∏—á–∏–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `tourist_reason_sessions` 15 –º–∏–Ω—É—Ç; –ø–æ —Ç–∞–π–º–∞—É—Ç—É –æ–Ω–æ –æ—á–∏—â–∞–µ—Ç—Å—è, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–æ–≤–æ–π.
6. ¬´‚úçÔ∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Å—Å–∏—é –≤ `tourist_note_sessions` –Ω–∞ 10 –º–∏–Ω—É—Ç: –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É ¬´–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º. –°–µ—Å—Å–∏—è –¥–ª–∏—Ç—Å—è 10 –º–∏–Ω—É—Ç.¬ª –∏ –∂–¥—ë—Ç —Ç–µ–∫—Å—Ç.
7. –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `tourist_note`, –æ–±–Ω–æ–≤–ª—è–µ—Ç `tourist_label_by`, `tourist_label_at`, `tourist_label_source="operator"`, –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è, –ª–æ–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç `tourist_note_saved` (—Å `has_note`).
8. ¬´üßΩ –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π¬ª —É–¥–∞–ª—è–µ—Ç `tourist_note`, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∞/–¥–∞—Ç—É/–∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ª–æ–≥ `tourist_note_cleared`.
9. ¬´–ì–æ—Ç–æ–≤–æ¬ª –∏ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª –∑–∞–∫—Ä—ã–≤–∞—é—Ç –º–µ–Ω—é –ø—Ä–∏—á–∏–Ω, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –±–∞–∑–æ–≤—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Ç–æ—Å—Ç ¬´–ü—Ä–∏—á–∏–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã¬ª –∏–ª–∏ ¬´–ü—Ä–∏—á–∏–Ω—ã –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–∑–∂–µ¬ª.
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ –ø—Ä–∞–≤ (–ø–∞—Ä—Ç–Ω—ë—Ä—ã, –≥–æ—Å—Ç–∏, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) –ø–æ–ª—É—á–∞—é—Ç ¬´Not authorized¬ª, –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è, –ª–æ–≥ –Ω–µ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è.
11. –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `tourist_message_sources[(chat_id, message_id)]`, —á—Ç–æ–±—ã —Ä–∞–∑–ª–∏—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã Telegram –∏ VK.
12. –ö–æ–º–∞–Ω–¥–∞ `/tourist_export [--period | period=]` –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–µ–º –∂–µ —Ä–æ–ª—è–º, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `.jsonl` —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ —Å–æ–±—ã—Ç–∏—è –∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ `tourist_*`, —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –ø–æ –¥–∞—Ç–µ/ID, –Ω–∞–∑—ã–≤–∞–µ—Ç —Ñ–∞–π–ª `tourist_export_<start>_<end>_<timestamp>.jsonl`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ¬´No events found¬ª –ø—Ä–∏ –ø—É—Å—Ç–æ–º –Ω–∞–±–æ—Ä–µ –∏ –ª–æ–≥–∏—Ä—É–µ—Ç `tourist_export.request/start/done`.
