# Philharmonia Parser (–§–∏–ª–∞—Ä–º–æ–Ω–∏—è)

> **Linear Task:** [EVE-21](https://linear.app/events-bot-new/issue/EVE-21/parsing-sajta-filarmonii-deep-parsing-and-formatting)
> **Status:** üöß Partially Implemented
> **Implemented:** Basic List Parsing (Title, Date, Time)
> **Not Implemented:** Deep Parsing (Detail Page), Program Formatting

## 1. –û–±–∑–æ—Ä
–ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–Ω–æ–π —Ñ–∏–ª–∞—Ä–º–æ–Ω–∏–∏.
*   **–ò—Å—Ç–æ—á–Ω–∏–∫:** `teatr39.ru` (–∏–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–∞–π—Ç —Ñ–∏–ª–∞—Ä–º–æ–Ω–∏–∏)
*   **–ú–µ—Ç–æ–¥:** Kaggle Notebook (Selenium/BeautifulSoup)

## 2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ü–∞—Ä—Å–∏–Ω–≥—É

### 2.1. Basic Parsing (Implemented ‚úÖ)
*   –°–±–æ—Ä —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞—Ñ–∏—à–∏.
*   –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ–ª–µ–π: –ù–∞–∑–≤–∞–Ω–∏–µ, –î–∞—Ç–∞, –í—Ä–µ–º—è, –°—Å—ã–ª–∫–∞ –Ω–∞ –±–∏–ª–µ—Ç—ã.

### 2.2. Deep Parsing (Not Implemented / Bug ‚ùå)
> **Problem:** –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (`parse_philharmonia.ipynb`) –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–æ —á–∞—Å—Ç–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç (—Å–µ–ª–µ–∫—Ç–æ—Ä `div.mer_item_info_text` –∏–ª–∏ `div.text`), –∏ **–º–æ–ª—á–∞ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è** –∫ –∫–æ—Ä–æ—Ç–∫–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é –∏–∑ —Å–ø–∏—Å–∫–∞ (`.mer_item_list_progr`).
> **Result:** –í —Å–æ–±—ã—Ç–∏—è—Ö –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ö–æ—Ç—è –∫–æ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –≤—Ä–æ–¥–µ –±—ã –µ—Å—Ç—å.
> **Requirement:**
1.  **Fix Selectors:** –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
2.  **No Fallback:** –ï—Å–ª–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä—É–±–æ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞, –∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–± –æ—à–∏–±–∫–µ –∏–ª–∏ –∏—Å–∫–∞—Ç—å –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º.
3.  **Ensure Usage:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `full_desc_text` —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 2.3. Program Formatting (Not Implemented ‚ùå)
> **Problem:** –í –∫–æ–¥–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –≤—Å–µ –æ–ø–∏—Å–∞–Ω–∏–µ (`inner_text`) –æ–¥–Ω–∏–º –±–ª–æ–∫–æ–º. –°–ø–∏—Å–æ–∫ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π ("–í –ø—Ä–æ–≥—Ä–∞–º–º–µ:") —Å–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∫–∞—à—É.
> **Requirement:**
1.  **Detection:** –ù–∞–π—Ç–∏ –±–ª–æ–∫ "–í –ø—Ä–æ–≥—Ä–∞–º–º–µ" –≤–Ω—É—Ç—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏—è.
2.  **Formatting:**
    *   –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —á–∏—Å—Ç—ã–π HTML —Å–ø–∏—Å–æ–∫ (`<ul><li>...</li></ul>`).
    *   –í—ã–¥–µ–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.
3.  **Telegraph:** –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω.

### 2.4. Gallery Extraction (Not Implemented ‚ùå)
> **Current:** –ë–µ—Ä–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ (`img.mer_item_img`) —Å–æ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π.
> **Requirement:**
1.  –ù–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏—Å–∫–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≥–∞–ª–µ—Ä–µ—é.
2.  –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö –≤ –º–∞—Å—Å–∏–≤ `images`.

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
*   **Notebook:** `kaggle/ParsePhilharmonia`
*   **Output:** `philharmonia.json`
